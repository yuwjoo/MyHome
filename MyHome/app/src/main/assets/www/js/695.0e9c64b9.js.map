{"version":3,"file":"js/695.0e9c64b9.js","mappings":"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","sources":["webpack://my-home/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://my-home/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://my-home/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://my-home/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://my-home/./node_modules/vue-loader/dist/exportHelper.js","webpack://my-home/./src/utils/android/utils/webViewBridge/utils.ts","webpack://my-home/./src/utils/android/utils/webViewBridge/bridgeConfig.ts","webpack://my-home/./src/utils/android/utils/webViewBridge/webViewInterface.ts","webpack://my-home/./src/utils/android/utils/webViewBridge/bridgeChannel.ts","webpack://my-home/./src/utils/android/utils/webViewBridge/webInterface.ts","webpack://my-home/./src/utils/android/utils/webViewBridge/index.ts","webpack://my-home/./src/utils/android/utils/bridge/bridgeConfig.ts","webpack://my-home/./src/utils/android/utils/bridge/bridgeInterfaceForAndroid.ts","webpack://my-home/./src/views/test-page/components/book-reader/action-bar/action-bar.vue","webpack://my-home/./src/views/test-page/components/book-reader/action-bar/action-bar.vue?3f2c","webpack://my-home/./src/views/test-page/components/book-reader/book-page/book-page-scroll.vue","webpack://my-home/./src/views/test-page/components/book-reader/book-page/book-page-scroll.vue?34d8","webpack://my-home/./src/views/test-page/components/book-reader/book-page/book-page.vue","webpack://my-home/./src/views/test-page/components/book-reader/book-page/book-page.vue?249f","webpack://my-home/./src/views/test-page/components/book-reader/book-reader.vue","webpack://my-home/./src/views/test-page/components/book-reader/book-reader.vue?3705","webpack://my-home/./src/views/test-page/test-page.vue","webpack://my-home/./src/views/test-page/test-page.vue?3b17"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","/**\r\n * @description: 生成随机id\r\n * @return {string} id\r\n */\r\nexport function generateId(): string {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\r\n}\r\n","export const bridgeConfig = {\r\n  webViewInterfaceKey: \"__BRIDGE_WEB_VIEW_INTERFACE__\", // webView接口标识\r\n  webInterfaceKey: \"__BRIDGE_WEB_INTERFACE__\", // web接口标识\r\n  globalEventChannelId: \"__GLOBAL_EVENT_CHANNEL__\", // 全局事件通道id\r\n  resolveCallbackKey: \"__RESOLVE_CALLBACK__\", // 成功回调key\r\n  rejectCallbackKey: \"__REJECT_CALLBACK__\" // 失败回调key\r\n};\r\n","import { bridgeConfig } from \"./bridgeConfig\";\r\nimport type {\r\n  WebViewInterface,\r\n  WebViewInterfaceCallMethodOptions,\r\n  WebViewInterfaceTriggerEventOptions\r\n} from \"./types/webViewInterface\";\r\n\r\nconst webViewInterface: WebViewInterface | null = window[bridgeConfig.webViewInterfaceKey];\r\n\r\n/**\r\n * @description: 是否可用\r\n * @return {boolean} 状态\r\n */\r\nexport function available(): boolean {\r\n  return !!webViewInterface;\r\n}\r\n\r\n/**\r\n * @description: 调用方法\r\n * @param {WebViewInterfaceCallMethodOptions} options 发送数据\r\n */\r\nexport function callMethod(options: WebViewInterfaceCallMethodOptions) {\r\n  webViewInterface?.callMethod(JSON.stringify(options));\r\n}\r\n\r\n/**\r\n * @description: 触发事件\r\n * @param {WebViewInterfaceTriggerEventOptions} options 发送数据\r\n */\r\nexport function triggerEvent(options: WebViewInterfaceTriggerEventOptions) {\r\n  webViewInterface?.triggerEvent(JSON.stringify(options));\r\n}\r\n\r\n/**\r\n * @description: 抛出异常\r\n * @param {string} message 消息\r\n */\r\nexport function throwError(message: string) {\r\n  webViewInterface?.throwError(message);\r\n}\r\n\r\n/**\r\n * @description: 重置bridge\r\n */\r\nexport function resetBridge() {\r\n  webViewInterface?.resetBridge();\r\n}\r\n","import type {\r\n  BridgeChannelDone,\r\n  BridgeChannelEmit,\r\n  BridgeChannelOff,\r\n  BridgeChannelOn,\r\n  BridgeChannelOnly,\r\n  BridgeChannelSend,\r\n  Callback\r\n} from \"./types/bridgeChannel\";\r\nimport { generateId } from \"./utils\";\r\nimport { triggerEvent } from \"./webViewInterface\";\r\n\r\nexport const channelMap: Map<string, BridgeChannel> = new Map(); // 通道map\r\n\r\nexport class BridgeChannel {\r\n  private readonly events: Map<string, Set<Callback>> = new Map(); // 监听事件map\r\n  public readonly id: string; // 通道id\r\n\r\n  constructor(id: string = generateId()) {\r\n    this.id = id;\r\n    channelMap.set(this.id, this);\r\n  }\r\n\r\n  /**\r\n   * @description: 监听事件\r\n   */\r\n  public readonly on: BridgeChannelOn = (eventName, callback) => {\r\n    if (!this.events.has(eventName)) {\r\n      this.events.set(eventName, new Set());\r\n    }\r\n    this.events.get(eventName)!.add(callback);\r\n  };\r\n\r\n  /**\r\n   * @description: 监听一次性事件\r\n   */\r\n  public readonly only: BridgeChannelOnly = (eventName, callback) => {\r\n    const onceWrapper = (payload: string) => {\r\n      callback(payload);\r\n      this.off(eventName, onceWrapper);\r\n    };\r\n    this.on(eventName, onceWrapper);\r\n  };\r\n\r\n  /**\r\n   * @description: 取消事件\r\n   */\r\n  public readonly off: BridgeChannelOff = (eventName, callback) => {\r\n    const callbacks = this.events.get(eventName);\r\n    if (callbacks) {\r\n      callbacks.delete(callback);\r\n      if (callbacks.size === 0) {\r\n        this.events.delete(eventName);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @description: 触发内部事件\r\n   */\r\n  public readonly emit: BridgeChannelEmit = (eventName, payload) => {\r\n    const callbacks = this.events.get(eventName);\r\n    if (callbacks) {\r\n      callbacks.forEach((cb) => cb(payload));\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @description: 发送事件\r\n   */\r\n  public readonly send: BridgeChannelSend = (eventName, payload) => {\r\n    triggerEvent({ channelId: this.id, eventName, payload, isDone: false });\r\n  };\r\n\r\n  /**\r\n   * @description: 发送结束事件\r\n   */\r\n  public readonly done: BridgeChannelDone = (eventName, payload) => {\r\n    triggerEvent({ channelId: this.id, eventName, payload, isDone: true });\r\n    this.close();\r\n  };\r\n\r\n  /**\r\n   * @description: 关闭通道\r\n   */\r\n  public readonly close = () => {\r\n    this.events.clear();\r\n    channelMap.delete(this.id);\r\n  };\r\n}\r\n","import { channelMap } from \"./bridgeChannel\";\r\nimport { bridgeConfig } from \"./bridgeConfig\";\r\nimport type { WebInterfaceTriggerEventOptions } from \"./types/webInterface\";\r\n\r\n/**\r\n * @description: 触发事件\r\n * @param {WebInterfaceTriggerEventOptions} options 发送数据\r\n */\r\nfunction triggerEvent(options: WebInterfaceTriggerEventOptions) {\r\n  const channel = channelMap.get(options.channelId);\r\n  if (channel === undefined) return;\r\n  if (options.eventName) {\r\n    channel.emit(options.eventName, options.payload);\r\n  }\r\n  if (options.isDone) {\r\n    channel.emit(options.isError ? bridgeConfig.rejectCallbackKey : bridgeConfig.resolveCallbackKey, options.payload);\r\n    channel.close();\r\n  }\r\n}\r\n\r\n/**\r\n * @description: 抛出异常\r\n * @param {string} message 消息\r\n */\r\nfunction throwError(message: string) {\r\n  console.error(message);\r\n}\r\n\r\n/**\r\n * @description: 挂载web接口对象\r\n */\r\nexport function mountWebInterface() {\r\n  window[bridgeConfig.webInterfaceKey] = {\r\n    triggerEvent,\r\n    throwError\r\n  };\r\n}\r\n","import { BridgeChannel } from \"./bridgeChannel\";\r\nimport { bridgeConfig } from \"./bridgeConfig\";\r\nimport { mountWebInterface } from \"./webInterface\";\r\nimport { available, callMethod, resetBridge } from \"./webViewInterface\";\r\n\r\nconst globalChannel = new BridgeChannel(bridgeConfig.globalEventChannelId); // 全局事件通道\r\n\r\nmountWebInterface();\r\n\r\nwindow.addEventListener(\"beforeunload\", resetBridge);\r\n\r\n/**\r\n * @description: 发送方式触发api\r\n * @param {string} apiPath api路径\r\n * @param {any} data 数据\r\n */\r\nfunction send(apiPath: string, data?: any) {\r\n  callMethod({ apiPath, payload: data });\r\n}\r\n\r\n/**\r\n * @description: 调用方式触发api\r\n * @param {string} apiPath api路径\r\n * @param {any} data 数据\r\n * @return {Promise<any>} Promise对象\r\n */\r\nfunction invoke(apiPath: string, data?: any): Promise<any> {\r\n  const channel = new BridgeChannel();\r\n  callMethod({ channelId: channel.id, apiPath, payload: data });\r\n  return new Promise((resolve, reject) => {\r\n    channel.only(bridgeConfig.resolveCallbackKey, resolve);\r\n    channel.only(bridgeConfig.rejectCallbackKey, reject);\r\n  });\r\n}\r\n\r\n/**\r\n * @description: socket方式触发api\r\n * @param {string} apiPath api路径\r\n * @return {Record<string, any>} 操作对象\r\n */\r\nfunction createSocket(apiPath: string) {\r\n  const channel = new BridgeChannel();\r\n  const connect = (data?: any) => {\r\n    callMethod({ channelId: channel.id, apiPath, payload: data });\r\n  };\r\n\r\n  return {\r\n    on: channel.on,\r\n    only: channel.only,\r\n    off: channel.off,\r\n    send: channel.send,\r\n    done: channel.done,\r\n    connect\r\n  };\r\n}\r\n\r\nexport default {\r\n  available,\r\n  globalChannel,\r\n  send,\r\n  invoke,\r\n  createSocket\r\n};\r\n","export const bridgeConfig = {\r\n  ANDROID_INTERFACE_KEY: \"__BRIDGE_INTERFACE_FOR_ANDROID__\", // android接口对象key\r\n  WEB_INTERFACE_KEY: \"__BRIDGE_INTERFACE_FOR_WEB__\", // web接口对象key\r\n\r\n  RESOLVE_CALLBACK_KEY: Symbol(\"RESOLVE_CALLBACK_KEY\"), // 成功回调key\r\n  REJECT_CALLBACK_KEY: Symbol(\"REJECT_CALLBACK_KEY\"), // 失败回调key\r\n\r\n  GLOBAL_EVENT_CHANNEL_ID: \"__GLOBAL_EVENT_CHANNEL__\" // 全局事件通道id\r\n};\r\n","import type {\r\n  AndroidInterface,\r\n  AndroidCallMethodOptions,\r\n  AndroidTriggerEventOptions\r\n} from \"../../types/bridge/bridgeInterfaceForAndroid\";\r\nimport { bridgeConfig } from \"./bridgeConfig\";\r\n\r\nclass BridgeInterfaceForAndroid {\r\n  /**\r\n   * @description: android接口对象\r\n   * @return {AndroidInterface} 接口对象\r\n   */\r\n  private get androidInterface(): AndroidInterface | undefined {\r\n    return window[bridgeConfig.ANDROID_INTERFACE_KEY];\r\n  }\r\n\r\n  /**\r\n   * @description: 是否可用\r\n   * @return {boolean} 状态\r\n   */\r\n  public get available(): boolean {\r\n    return !!this.androidInterface;\r\n  }\r\n\r\n  /**\r\n   * @description: 调用方法\r\n   * @param {AndroidCallMethodOptions} data 发送数据\r\n   */\r\n  public callMethod(data: AndroidCallMethodOptions) {\r\n    this.androidInterface?.callMethod(JSON.stringify(data));\r\n  }\r\n\r\n  /**\r\n   * @description: 触发事件\r\n   * @param {AndroidTriggerEventOptions} options 消息\r\n   */\r\n  public triggerEvent(options: AndroidTriggerEventOptions) {\r\n    this.androidInterface?.triggerEvent(options);\r\n  }\r\n\r\n  /**\r\n   * @description: 抛出异常\r\n   * @param {string} message 消息\r\n   */\r\n  public throwError(message: string) {\r\n    this.androidInterface?.throwError(message);\r\n  }\r\n\r\n  /**\r\n   * @description: 重新构建\r\n   */\r\n  public rebuild() {\r\n    this.androidInterface?.rebuild();\r\n  }\r\n}\r\n\r\nexport const bridgeInterfaceForAndroid = new BridgeInterfaceForAndroid();\r\n","import { defineComponent as _defineComponent } from 'vue';\nimport { renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"action-bar\"\n};\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n    name: \"action-bar\"\n  },\n  __name: 'action-bar',\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_renderSlot(_ctx.$slots, \"default\")]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./action-bar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./action-bar.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"book-page-scroll__page-title\"\n};\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n    name: \"book-page-scroll\"\n  },\n  __name: 'book-page-scroll',\n  props: {\n    // 数据\n    pages: {\n      type: Array\n    }\n  },\n  setup(__props) {\n    const handleScroll = ev => {\n      ev;\n      // console.log(ev);\n    };\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        class: \"book-page-scroll\",\n        onScrollPassive: handleScroll\n      }, [_cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n        class: \"book-page-scroll__header\"\n      }, null, -1)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.pages, page => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: page.id,\n          class: \"book-page-scroll__page\"\n        }, [_createElementVNode(\"h1\", _hoisted_1, _toDisplayString(page.title), 1), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(page.lines, (text, index) => {\n          return _openBlock(), _createElementBlock(\"p\", {\n            key: index,\n            class: \"book-page-scroll__page-line\"\n          }, _toDisplayString(text), 1);\n        }), 128))]);\n      }), 128)), _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n        class: \"book-page-scroll__footer\"\n      }, null, -1))], 32);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./book-page-scroll.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./book-page-scroll.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./book-page-scroll.vue?vue&type=style&index=0&id=09448334&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-09448334\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 1,\n  class: \"book-page\"\n};\nimport BookPageScroll from \"./book-page-scroll.vue\";\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n    name: \"book-page\"\n  },\n  __name: 'book-page',\n  props: {\n    // 模式\n    mode: {\n      type: String,\n      default: \"scroll\"\n    },\n    // 数据\n    pages: {\n      type: Array,\n      required: true\n    }\n  },\n  setup(__props) {\n    return (_ctx, _cache) => {\n      return __props.mode === 'scroll' ? (_openBlock(), _createBlock(BookPageScroll, {\n        key: 0,\n        pages: __props.pages\n      }, null, 8, [\"pages\"])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_1));\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./book-page.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./book-page.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"book-reader\"\n};\nimport ActionBar from \"./action-bar/action-bar.vue\";\nimport BookPage from \"./book-page/book-page.vue\";\n\nimport { ref } from 'vue';\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n    name: \"book-reader\"\n  },\n  __name: 'book-reader',\n  props: {\n    // 加载上一页\n    prevLoadFun: {\n      type: Function\n    },\n    // 加载下一页\n    nextLoadFun: {\n      type: Function\n    }\n  },\n  setup(__props) {\n    const pages = ref([{\n      id: \"1\",\n      title: \"测试标题\",\n      lines: [\"奇偶位i问附件我今儿佛教我二哦附件为偶分\", \"sjfojweofjoweijfoweijfowejfoihweohfowehfoihweiofhoweihfowiheofihweofhwoe\"]\n    }, {\n      id: \"2\",\n      title: \"测试标题\",\n      lines: [\"奇偶位i问附件我今儿佛教我二哦附件为偶分\", \"sjfojweofjoweijfoweijfowejfoihweohfowehfoihweiofhoweihfowiheofihweofhwoe\"]\n    }, {\n      id: \"3\",\n      title: \"测试标题\",\n      lines: [\"奇偶位i问附件我今儿佛教我二哦附件为偶分\", \"sjfojweofjoweijfoweijfowejfoihweohfowehfoihweiofhoweihfowiheofihweofhwoe\"]\n    }, {\n      id: \"4\",\n      title: \"测试标题\",\n      lines: [\"奇偶位i问附件我今儿佛教我二哦附件为偶分\", \"sjfojweofjoweijfoweijfowejfoihweohfowehfoihweiofhoweihfowiheofihweofhwoe\"]\n    }, {\n      id: \"5\",\n      title: \"测试标题\",\n      lines: [\"奇偶位i问附件我今儿佛教我二哦附件为偶分\", \"sjfojweofjoweijfoweijfowejfoihweohfowehfoihweiofhoweihfowiheofihweofhwoe\"]\n    }, {\n      id: \"6\",\n      title: \"测试标题\",\n      lines: [\"奇偶位i问附件我今儿佛教我二哦附件为偶分\", \"sjfojweofjoweijfoweijfowejfoihweohfowehfoihweiofhoweihfowiheofihweofhwoe\"]\n    }]);\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(ActionBar, null, {\n        default: _withCtx(() => [_createVNode(BookPage, {\n          mode: \"scroll\",\n          pages: _unref(pages)\n        }, null, 8, [\"pages\"])]),\n        _: 1\n      })]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./book-reader.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./book-reader.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"test-page\"\n};\nimport { bridgeInterfaceForAndroid } from \"@/utils/android/utils/bridge/bridgeInterfaceForAndroid\";\nimport BookReader from \"./components/book-reader/book-reader.vue\";\n// import { request } from \"@/utils/axios\";\n// import { bridgeEmitter } from \"@/utils/android/utils/bridge\";\n// import { crawlers } from \"@/utils/crawler\";\nimport webViewBridge from \"@/utils/android/utils/webViewBridge\";\nexport default /*@__PURE__*/_defineComponent({\n  ...{\n    name: \"test-page\"\n  },\n  __name: 'test-page',\n  setup(__props) {\n    // import axios from \"axios\";\n    async function test() {\n      const socket = webViewBridge.createSocket(\"net/test\");\n      socket.on(\"message\", msg => {\n        console.log(\"收到消息\", msg);\n      });\n      socket.on(\"done\", msg => {\n        console.log(\"连接关闭\", msg);\n      });\n      socket.connect({\n        aa: 3,\n        bb: true\n      });\n    }\n    webViewBridge.globalChannel.on(\"version\", result => {\n      console.log(\"globalChannel-version\", result);\n    });\n    test();\n    bridgeInterfaceForAndroid.callMethod({\n      callMethodPath: [],\n      data: \"33333\"\n    });\n    // const name = \"lengku8\";\n    // console.log(\"aa\", crawlers[name]);\n    // const CancelToken = axios.CancelToken;\n    // const source = CancelToken.source();\n    const formData = new FormData();\n    formData.append(\"keyword\", \"姐姐\");\n    formData.append(\"page\", \"2\");\n    formData.append(\"size\", \"10\");\n    const urlParams = new URLSearchParams();\n    urlParams.append(\"keyword\", \"姐姐\");\n    urlParams.append(\"page\", \"2\");\n    urlParams.append(\"size\", \"10\");\n    // requestApp({\n    //   url: \"http://192.168.0.108:3000/test-post\",\n    //   method: \"post\",\n    //   params: {\n    //     name: \"test22\",\n    //     age: 18\n    //   },\n    //   cancelToken: source.token,\n    //   headers: {\n    //     // \"Content-Type\": \"text/plain\"\n    //   },\n    //   data: {\n    //     aa: 1,\n    //     bb: 2\n    //   }\n    // })\n    //   .then((res) => {\n    //     console.log(\"请求成功\", res);\n    //   })\n    //   .catch((err) => {\n    //     if (axios.isCancel(err)) {\n    //       console.log(\"请求被取消\", err.message);\n    //     } else {\n    //       console.error(\"请求失败\", err);\n    //     }\n    //   });\n    // request({\n    //   url: \"http://192.168.0.106:3000/test-post\",\n    //   method: \"post\",\n    //   params: {\n    //     name: \"test22\",\n    //     age: 18\n    //   },\n    //   cancelToken: source.token,\n    //   // data: {\n    //   //   aa: 1,\n    //   //   bb: 2\n    //   // },\n    //   data: urlParams,\n    //   sendEnv: \"android\"\n    // })\n    //   .then((res) => {\n    //     console.log(\"请求成功1\", res);\n    //   })\n    //   .catch((err) => {\n    //     if (axios.isCancel(err)) {\n    //       console.log(\"请求被取消\", err.message);\n    //     } else {\n    //       console.error(\"请求失败\", err);\n    //     }\n    //   });\n    // setTimeout(() => {\n    //   source.cancel(\"3333\");\n    // }, 2000);\n    // const apiHandler = bridgeApi.request({\n    //   url: \"\",\n    //   method: \"\",\n    //   headers: {},\n    //   timeout: 0\n    // });\n    // apiHandler.on(\"downloadProgress\", (result) => {\n    //   result;\n    // });\n    // apiHandler.done(\"cancel\");\n    // bridgeGlobal.on(\"version\", (result) => {\n    //   console.log(result);\n    // });\n    // bridgeEmitter.connect(\"request\", {\n    //   url: \"\",\n    //   method: \"\",\n    //   headers: {},\n    //   timeout: 0\n    // });\n    // type FlattenApiRouter<T, Prefix extends string = \"\", Separator extends string = \"/\"> = {\n    //   [K in keyof T]: T[K] extends any[]\n    //     ? { [P in `${Prefix}${K & string}`]: T[K] }\n    //     : T[K] extends object\n    //     ? FlattenApiRouter<T[K], `${Prefix}${K & string}${Separator}`>\n    //     : never;\n    // }[keyof T] extends infer R\n    //   ? { [P in keyof R]: R[P] }\n    //   : never;\n    // type ApiRouter = {\n    //   openDialog: [string, number];\n    //   net: {\n    //     request: {\n    //       aa: [number, any[]];\n    //     };\n    //     bb: [string];\n    //   };\n    // };\n    // type Api = FlattenApiRouter<ApiRouter>;\n    // function send<K extends keyof Api>(name: K, data: Api[K]) {\n    //   console.log(data);\n    // }\n    // send(\"\");\n    // 使用映射类型合并联合类型\n    // type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never;\n    // type FlattenPath<T, Separator extends string = \"/\", Prefix extends string = \"\"> = {\n    //   [K in keyof T]: T[K] extends any[]\n    //     ? { [P in `${Prefix}${K & string}`]: T[K] }\n    //     : T[K] extends object\n    //     ? FlattenPath<T[K], Separator, `${Prefix}${K & string}${Separator}`>\n    //     : never;\n    // }[keyof T];\n    // type Api = UnionToIntersection<FlattenPath<ApiRouter>>;\n    // function send<K extends keyof Api>(name: K, data: Api[K][0]) {\n    //   console.log(data);\n    // }\n    // send(\"net/request/aa\");\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(BookReader)]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./test-page.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./test-page.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./test-page.vue?vue&type=style&index=0&id=aa50757c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-aa50757c\"]])\n\nexport default __exports__"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPrimitive","t","r","e","i","call","TypeError","String","Number","toPropertyKey","_defineProperty","Object","defineProperty","value","enumerable","configurable","writable","exports","sfc","props","target","__vccOpts","key","val","generateId","Date","now","toString","Math","random","substring","bridgeConfig","webViewInterfaceKey","webInterfaceKey","globalEventChannelId","resolveCallbackKey","rejectCallbackKey","webViewInterface","window","available","callMethod","options","JSON","stringify","triggerEvent","resetBridge","channelMap","Map","BridgeChannel","id","eventName","callback","this","events","has","set","Set","get","add","onceWrapper","payload","off","on","callbacks","delete","size","forEach","cb","channelId","isDone","close","clear","channel","undefined","emit","isError","throwError","message","console","error","mountWebInterface","globalChannel","send","apiPath","data","invoke","Promise","resolve","reject","only","createSocket","connect","done","addEventListener","ANDROID_INTERFACE_KEY","WEB_INTERFACE_KEY","RESOLVE_CALLBACK_KEY","REJECT_CALLBACK_KEY","GLOBAL_EVENT_CHANNEL_ID","BridgeInterfaceForAndroid","androidInterface","rebuild","bridgeInterfaceForAndroid","_hoisted_1","class","name","__name","setup","__props","_ctx","_cache","$slots","__exports__","pages","type","Array","handleScroll","ev","onScrollPassive","page","title","lines","text","index","mode","default","required","prevLoadFun","Function","nextLoadFun","_","async","test","socket","webViewBridge","msg","log","aa","bb","result","callMethodPath","formData","FormData","append","urlParams","URLSearchParams"],"sourceRoot":""}