"use strict";(self["webpackChunkmy_home"]=self["webpackChunkmy_home"]||[]).push([[841],{633:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var o=a(2879),s=a(1360),l=(a(4114),a(6768)),n=a(144),i=a(5130),c=a(8172),r=a(2376),d=a(4232);const u={class:"book-item"},k={class:"book-item__title"};var p=(0,l.pM)({name:"book-item",__name:"book-item",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(e){return(t,a)=>((0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("h1",k,(0,d.v_)(e.item.title),1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.item.paragraphs,((e,t)=>((0,l.uX)(),(0,l.CE)("p",{class:"book-item__text",key:t},(0,d.v_)(e),1)))),128))]))}}),g=a(1241);const v=(0,g.A)(p,[["__scopeId","data-v-719e4823"]]);var b=v;const h={class:"back-group"},m={class:"setting-wrapper"},_={class:"setting-color"},C=["onClick"],S={class:"icon-tick"},f={class:"setting-font"},L={class:"setting-btn"},y={class:"setting-item"},F=["textContent"];function R(e,t,a,o,s,n){return(0,l.uX)(),(0,l.Wv)(i.eB,{name:"setting"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.Lk)("div",null,[(0,l.Lk)("div",h,[(0,l.Lk)("div",{class:"back-content",onClick:t[0]||(t[0]=(0,i.D$)(((...e)=>n.back&&n.back(...e)),["stop"]))},t[6]||(t[6]=[(0,l.Lk)("i",{class:"icon-arrow"},null,-1),(0,l.Lk)("span",null,"返回",-1)]))]),(0,l.bo)((0,l.Lk)("div",m,[(0,l.Lk)("div",_,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.color,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{class:"color-item",key:t},[(0,l.Lk)("span",{class:(0,d.C4)(["item",{active:e===s.bookStore.settings.customBg}]),style:(0,d.Tr)({background:e}),onClick:t=>n.changeColor(e)},[(0,l.bo)((0,l.Lk)("i",S,null,512),[[i.aG,e===s.bookStore.settings.customBg]])],14,C)])))),128))]),(0,l.Lk)("div",f,[(0,l.Lk)("div",{class:"font-item",onClick:t[1]||(t[1]=(...e)=>n.minusFontSize&&n.minusFontSize(...e))},t[7]||(t[7]=[(0,l.Lk)("span",{class:"font-btn"},"A-",-1)])),(0,l.Lk)("div",{class:"font-item",onClick:t[2]||(t[2]=(...e)=>n.addFontSize&&n.addFontSize(...e))},t[8]||(t[8]=[(0,l.Lk)("span",{class:"font-btn"},"A+",-1)]))])],512),[[i.aG,a.showFlag&&s.setting]]),(0,l.Lk)("div",L,[(0,l.Lk)("div",y,[(0,l.Lk)("div",{class:"icon-wrapper",onClick:t[3]||(t[3]=(...e)=>n.openChapters&&n.openChapters(...e))},t[9]||(t[9]=[(0,l.Lk)("i",{class:"icon-directory"},null,-1)])),t[10]||(t[10]=(0,l.Lk)("span",{class:"title"},"目录",-1))]),(0,l.Lk)("div",{class:"setting-item",onClick:t[4]||(t[4]=(...e)=>n.changeMode&&n.changeMode(...e))},[(0,l.Lk)("i",{class:(0,d.C4)(n.modeCls)},null,2),(0,l.Lk)("span",{class:"title",textContent:(0,d.v_)(n.modeText)},null,8,F)]),(0,l.Lk)("div",{class:"setting-item",onClick:t[5]||(t[5]=(...e)=>n.openSetting&&n.openSetting(...e))},t[11]||(t[11]=[(0,l.Lk)("i",{class:"icon-setting"},null,-1),(0,l.Lk)("span",{class:"title"},"设置",-1)]))])],512),[[i.aG,a.showFlag]])])),_:1})}var E=a(6931),X={name:"setting-btn",props:{showFlag:{type:Boolean,default:!1}},data(){return{setting:!1,color:["#f6f6f6","#e1d4b2","#bed8ab","#efc1c1","#dcc49e","#d9e8ff"],bookStore:(0,E.h)()}},computed:{modeCls(){return this.bookStore.settings.isNight?"icon-brightness":"icon-night"},modeText(){return this.bookStore.settings.isNight?"白天":"夜间"}},methods:{back(){this.$emit("back")},openChapters(){this.$emit("openChapters")},changeMode(){this.bookStore.setSetting("isNight",!this.bookStore.settings.isNight)},openSetting(){this.setting=!this.setting},changeColor(e){e!==this.bookStore.settings.customBg&&this.bookStore.setSetting("customBg",e)},minusFontSize(){this.bookStore.settings.fontSizeScale<=-5||this.bookStore.setSetting("fontSizeScale",this.bookStore.settings.fontSizeScale-1)},addFontSize(){this.bookStore.settings.fontSizeScale>=5||this.bookStore.setSetting("fontSizeScale",this.bookStore.settings.fontSizeScale+1)}},watch:{showFlag(e){!1===e&&(this.setting=!1)}}};const w=(0,g.A)(X,[["render",R],["__scopeId","data-v-712739c8"]]);var x=w;const z={class:"book-read__catalog-header"};var A=(0,l.pM)({name:"book-read",__name:"book-read",setup(e){const t=(0,c.l)(),a=(0,c.r)(),d=(0,E.h)(),u=(0,l.rk)("bookReadRef"),k=(0,n.KR)([]),p=(0,n.KR)(!1),g=(0,n.KR)([]),v=(0,l.EW)((()=>k.value[k.value.length-1].nextChapterId)),h=(0,n.KR)(!1),m=(0,n.KR)(!1),_=()=>{m.value=!1,h.value=!0},C=()=>{a.back()},S=async e=>{try{p.value=!0;const a=await(0,r.nw)({id:t.query.id,chapterId:e});k.value.push(a)}finally{p.value=!1}},f=async()=>{g.value=await(0,r.Or)({id:t.query.id})},L=()=>{!p.value&&v.value&&S(v.value)},y=e=>{k.value=[],S(e.id),h.value=!1,m.value=!1};return S(t.query.chapterId),f(),(0,l.sV)((()=>{(0,l.nT)((()=>{if(!u.value)return;const e=d.currentMode;u.value.style.setProperty("--book-read-bg",e.bg),u.value.style.setProperty("--book-read-color",e.color),u.value.style.setProperty("--book-read-title-color",d.settings.isNight?e.color:""),u.value.style.setProperty("--book-read-font-size-scale",e.fontSizeScale+"px")}))})),(e,t)=>{const a=s.A,c=o.A;return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",{class:"book-read",ref_key:"bookReadRef",ref:u,onClick:t[2]||(t[2]=e=>m.value=!(0,n.R1)(m))},[(0,l.bF)(a,{class:"book-read__list",list:(0,n.R1)(k),"min-item-size":200,loading:(0,n.R1)(p),"key-field":"chapterId",onScrollToBottom:L},{default:(0,l.k6)((({item:e,index:t})=>[(0,l.bF)(b,{item:e,index:t},null,8,["item","index"])])),_:1},8,["list","loading"]),(0,n.R1)(h)?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"book-read__catalog",onClick:t[1]||(t[1]=(0,i.D$)((()=>{}),["stop"]))},[(0,l.Lk)("div",z,[(0,l.Lk)("i",{class:"book-read__catalog-header-back icon-back",onClick:t[0]||(t[0]=e=>h.value=!1)}),t[3]||(t[3]=(0,l.Lk)("span",{class:"book-read__catalog-header-label"},"返回",-1))]),(0,l.bF)(c,{class:"book-read__catalog-panel",list:(0,n.R1)(g),onChange:y},null,8,["list"])])):(0,l.Q3)("",!0)],512),(0,l.bF)(x,{showFlag:(0,n.R1)(m),onOpenChapters:_,onBack:C},null,8,["showFlag"])],64)}}});const I=(0,g.A)(A,[["__scopeId","data-v-4743151e"]]);var K=I},818:function(e,t,a){a(6647),a(7708),a(7484)},2879:function(e,t,a){a.d(t,{A:function(){return I}});var o=a(4726),s=a(6768),l=a(5828),n=a(6370),i=a(6591);const[c,r]=(0,l.YX)("sidebar"),d=Symbol(c),u={modelValue:(0,n.TU)(0)};var k=(0,s.pM)({name:c,props:u,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{linkChildren:o}=(0,i.Py)(d),l=()=>+e.modelValue,n=e=>{e!==l()&&(t("update:modelValue",e),t("change",e))};return o({getActive:l,setActive:n}),()=>{var e;return(0,s.bF)("div",{role:"tablist",class:r()},[null==(e=a.default)?void 0:e.call(a)])}}});const p=(0,o.G)(k);a(6647);var g=a(8442),v=a(4548),b=a(3408);const[h,m]=(0,l.YX)("sidebar-item"),_=(0,g.X$)({},v.aI,{dot:Boolean,title:String,badge:n.VQ,disabled:Boolean,badgeProps:Object});var C=(0,s.pM)({name:h,props:_,emits:["click"],setup(e,{emit:t,slots:a}){const o=(0,v.lq)(),{parent:l,index:n}=(0,i.cJ)(d);if(!l)return void 0;const c=()=>{e.disabled||(t("click",n.value),l.setActive(n.value),o())};return()=>{const{dot:t,badge:o,title:i,disabled:r}=e,d=n.value===l.getActive();return(0,s.bF)("div",{role:"tab",class:m({select:d,disabled:r}),tabindex:r?void 0:0,"aria-selected":d,onClick:c},[(0,s.bF)(b.Ex,(0,s.v6)({dot:t,class:m("text"),content:o},e.badgeProps),{default:()=>[a.title?a.title():i]})])}}});const S=(0,o.G)(C);a(7708);var f=a(5314),L=(a(818),a(4114),a(8111),a(7588),a(144)),y=a(4232);const F={class:"catalog-panel"},R={class:"catalog-panel__header"},E={class:"catalog-panel__content"},X={class:"catalog-panel__list"},w=["onClick"];var x=(0,s.pM)({name:"catalog-panel",__name:"catalog-panel",props:{list:{type:Array,required:!0},groupCount:{type:Number,default:50}},emits:["change"],setup(e,{emit:t}){const a=t,o=e,l=(0,L.KR)(!1),n=(0,L.KR)(0),i=(0,s.EW)((()=>{const e=[];let t=-1;return o.list.forEach(((a,s)=>{s%o.groupCount===0&&(t++,e.push({name:`${t*o.groupCount+1}-${t*o.groupCount+o.groupCount}`,chapters:[]})),e[t].chapters.push(a)})),l.value?e.reverse():e})),c=(0,s.EW)((()=>{const e=i.value[n.value]?.chapters||[];return l.value?e.slice().reverse():e})),r=e=>{a("change",e)};return(e,t)=>{const a=f.In,o=S,d=p;return(0,s.uX)(),(0,s.CE)("div",F,[(0,s.Lk)("div",R,[t[2]||(t[2]=(0,s.Lk)("div",{class:"catalog-panel__header-title"},"目录",-1)),(0,s.Lk)("div",{class:"catalog-panel__header-sort",onClick:t[0]||(t[0]=e=>l.value=!(0,L.R1)(l))},[(0,s.bF)(a,{name:"sort"}),(0,s.eW)(" "+(0,y.v_)((0,L.R1)(l)?"正序":"倒序"),1)])]),(0,s.Lk)("div",E,[(0,s.bF)(d,{class:"catalog-panel__sidebar",modelValue:(0,L.R1)(n),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,L.i9)(n)?n.value=e:null)},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,L.R1)(i),((e,t)=>((0,s.uX)(),(0,s.Wv)(o,{key:t,title:e.name},null,8,["title"])))),128))])),_:1},8,["modelValue"]),(0,s.Lk)("div",X,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,L.R1)(c),((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"catalog-panel__list-item",onClick:t=>r(e)},(0,y.v_)(e.title),9,w)))),128))])])])}}}),z=a(1241);const A=(0,z.A)(x,[["__scopeId","data-v-e5ad8e06"]]);var I=A}}]);
//# sourceMappingURL=841.208251d2.js.map