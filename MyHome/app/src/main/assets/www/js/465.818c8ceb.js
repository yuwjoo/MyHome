"use strict";(self["webpackChunkmy_home"]=self["webpackChunkmy_home"]||[]).push([[465],{1967:function(e,t,o){o.r(t),o.d(t,{default:function(){return ae}});var l=o(1360),a=o(4726),n=(o(8111),o(7588),o(1701),o(3579),o(6768)),i=o(144),s=o(5828),u=o(6370),r=o(8442),d=o(240),c=o(4612),p=o(9614),m=o(6145),v=o(6591);const[b,h]=(0,s.YX)("dropdown-menu"),f={overlay:u.Rd,zIndex:u.VQ,duration:(0,u.TU)(.2),direction:(0,u.Ts)("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:u.Rd,closeOnClickOverlay:u.Rd,swipeThreshold:u.VQ},g=Symbol(b);var w=(0,n.pM)({name:b,props:f,setup(e,{slots:t}){const o=(0,p.B)(),l=(0,i.KR)(),a=(0,i.KR)(),s=(0,i.KR)(0),{children:u,linkChildren:b}=(0,v.Py)(g),f=(0,v.f$)(l),w=(0,n.EW)((()=>u.some((e=>e.state.showWrapper)))),k=(0,n.EW)((()=>e.swipeThreshold&&u.length>+e.swipeThreshold)),y=(0,n.EW)((()=>{if(w.value&&(0,r.C8)(e.zIndex))return{zIndex:+e.zIndex+1}})),_=()=>{u.forEach((e=>{e.toggle(!1)}))},R=()=>{e.closeOnClickOutside&&_()},V=()=>{if(a.value){const t=(0,v.yD)(a);"down"===e.direction?s.value=t.bottom:s.value=d.C7.value-t.top}},C=()=>{w.value&&V()},x=e=>{u.forEach(((t,o)=>{o===e?t.toggle():t.state.showPopup&&t.toggle(!1,{immediate:!0})}))},F=(t,l)=>{const{showPopup:a}=t.state,{disabled:i,titleClass:s}=t;return(0,n.bF)("div",{id:`${o}-${l}`,role:"button",tabindex:i?void 0:0,"data-allow-mismatch":"attribute",class:[h("item",{disabled:i,grow:k.value}),{[c.Dk]:!i}],onClick:()=>{i||x(l)}},[(0,n.bF)("span",{class:[h("title",{down:a===("down"===e.direction),active:a}),s],style:{color:a?e.activeColor:""}},[(0,n.bF)("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return(0,m.c)({close:_,opened:w}),b({id:o,props:e,offset:s,opened:w,updateOffset:V}),(0,v.W3)(l,R),(0,v.ML)("scroll",C,{target:f,passive:!0}),()=>{var e;return(0,n.bF)("div",{ref:l,class:h()},[(0,n.bF)("div",{ref:a,style:y.value,class:h("bar",{opened:w.value,scrollable:k.value})},[u.map(F)]),null==(e=t.default)?void 0:e.call(t)])}}});const k=(0,a.G)(w);o(6647);var y=o(122),_=(o(2009),o(8139)),R=(o(7057),o(5130)),V=o(7905),C=o(9725);const[x,F]=(0,s.YX)("stepper"),I=200,T=(e,t)=>String(e)===String(t),P={min:(0,u.TU)(1),max:(0,u.TU)(1/0),name:(0,u.TU)(""),step:(0,u.TU)(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:u.Rd,showMinus:u.Rd,showInput:u.Rd,longPress:u.Rd,autoFixed:u.Rd,allowEmpty:Boolean,modelValue:u.VQ,inputWidth:u.VQ,buttonSize:u.VQ,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:(0,u.TU)(1),decimalLength:u.VQ};var z=(0,n.pM)({name:x,props:P,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:t}){const o=(t,o=!0)=>{const{min:l,max:a,allowEmpty:n,decimalLength:i}=e;return n&&""===t||(t=(0,V.ZV)(String(t),!e.integer),t=""===t?0:+t,t=Number.isNaN(t)?+l:t,t=o?Math.max(Math.min(+a,t),+l):t,(0,r.C8)(i)&&(t=t.toFixed(+i))),t},l=()=>{var l;const a=null!=(l=e.modelValue)?l:e.defaultValue,n=o(a);return T(n,e.modelValue)||t("update:modelValue",n),n};let a;const s=(0,i.KR)(),u=(0,i.KR)(l()),p=(0,n.EW)((()=>e.disabled||e.disableMinus||+u.value<=+e.min)),m=(0,n.EW)((()=>e.disabled||e.disablePlus||+u.value>=+e.max)),b=(0,n.EW)((()=>({width:(0,V._V)(e.inputWidth),height:(0,V._V)(e.buttonSize)}))),h=(0,n.EW)((()=>(0,V.vE)(e.buttonSize))),f=()=>{const e=o(u.value);T(e,u.value)||(u.value=e)},g=t=>{e.beforeChange?(0,C.m)(e.beforeChange,{args:[t],done(){u.value=t}}):u.value=t},w=()=>{if("plus"===a&&m.value||"minus"===a&&p.value)return void t("overlimit",a);const l="minus"===a?-e.step:+e.step,n=o((0,V.LF)(+u.value,l));g(n),t(a)},k=t=>{const o=t.target,{value:l}=o,{decimalLength:a}=e;let n=(0,V.ZV)(String(l),!e.integer);if((0,r.C8)(a)&&n.includes(".")){const e=n.split(".");n=`${e[0]}.${e[1].slice(0,+a)}`}e.beforeChange?o.value=String(u.value):T(l,n)||(o.value=n);const i=n===String(+n);g(i?+n:n)},y=o=>{var l;e.disableInput?null==(l=s.value)||l.blur():t("focus",o)},_=l=>{const a=l.target,i=o(a.value,e.autoFixed);a.value=String(i),u.value=i,(0,n.dY)((()=>{t("blur",l),(0,d.B0)()}))};let x,P;const z=()=>{P=setTimeout((()=>{w(),z()}),I)},S=()=>{e.longPress&&(x=!1,clearTimeout(P),P=setTimeout((()=>{x=!0,w(),z()}),c.wT))},O=t=>{e.longPress&&(clearTimeout(P),x&&(0,d.wo)(t))},E=t=>{e.disableInput&&(0,d.wo)(t)},W=e=>({onClick:t=>{(0,d.wo)(t),a=e,w()},onTouchstartPassive:()=>{a=e,S()},onTouchend:O,onTouchcancel:O});return(0,n.wB)((()=>[e.max,e.min,e.integer,e.decimalLength]),f),(0,n.wB)((()=>e.modelValue),(e=>{T(e,u.value)||(u.value=o(e))})),(0,n.wB)(u,(o=>{t("update:modelValue",o),t("change",o,{name:e.name})})),(0,v.Gp)((()=>e.modelValue)),()=>(0,n.bF)("div",{role:"group",class:F([e.theme])},[(0,n.bo)((0,n.bF)("button",(0,n.v6)({type:"button",style:h.value,class:[F("minus",{disabled:p.value}),{[c.Dk]:!p.value}],"aria-disabled":p.value||void 0},W("minus")),null),[[R.aG,e.showMinus]]),(0,n.bo)((0,n.bF)("input",{ref:s,type:e.integer?"tel":"text",role:"spinbutton",class:F("input"),value:u.value,style:b.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,autocomplete:"off","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":u.value,onBlur:_,onInput:k,onFocus:y,onMousedown:E},null),[[R.aG,e.showInput]]),(0,n.bo)((0,n.bF)("button",(0,n.v6)({type:"button",style:h.value,class:[F("plus",{disabled:m.value}),{[c.Dk]:!m.value}],"aria-disabled":m.value||void 0},W("plus")),null),[[R.aG,e.showPlus]])])}});const S=(0,a.G)(z);o(116);var O=o(5314),E=o(38);const[W,B]=(0,s.YX)("dropdown-item"),L={title:String,options:(0,u.zj)(),disabled:Boolean,teleport:[String,Object],lazyRender:u.Rd,modelValue:u.E9,titleClass:u.E9};var K=(0,n.pM)({name:W,inheritAttrs:!1,props:L,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:t,slots:o,attrs:l}){const a=(0,i.Kh)({showPopup:!1,transition:!0,showWrapper:!1}),s=(0,i.KR)(),{parent:u,index:r}=(0,v.cJ)(g);if(!u)return void 0;const c=e=>()=>t(e),p=c("open"),b=c("close"),h=c("opened"),f=()=>{a.showWrapper=!1,t("closed")},w=t=>{e.teleport&&t.stopPropagation()},k=(e=!a.showPopup,t={})=>{e!==a.showPopup&&(a.showPopup=e,a.transition=!t.immediate,e&&(u.updateOffset(),a.showWrapper=!0))},y=()=>{if(o.title)return o.title();if(e.title)return e.title;const t=e.options.find((t=>t.value===e.modelValue));return t?t.text:""},C=o=>{const{activeColor:l}=u.props,{disabled:i}=o,s=o.value===e.modelValue,r=()=>{i||(a.showPopup=!1,o.value!==e.modelValue&&(t("update:modelValue",o.value),t("change",o.value)))},d=()=>{if(s)return(0,n.bF)(O.In,{class:B("icon"),color:i?void 0:l,name:"success"},null)};return(0,n.bF)(_.fh,{role:"menuitem",key:String(o.value),icon:o.icon,title:o.text,class:B("option",{active:s,disabled:i}),style:{color:s?l:""},tabindex:s?0:-1,clickable:!i,onClick:r},{value:d})},x=()=>{const{offset:t}=u,{autoLocate:i,zIndex:c,overlay:m,duration:g,direction:k,closeOnClickOverlay:y}=u.props,_=(0,V.AO)(c);let x=t.value;if(i&&s.value){const e=(0,d.gJ)(s.value);e&&(x-=(0,v.yD)(e).top)}return"down"===k?_.top=`${x}px`:_.bottom=`${x}px`,(0,n.bo)((0,n.bF)("div",(0,n.v6)({ref:s,style:_,class:B([k]),onClick:w},l),[(0,n.bF)(E.zD,{show:a.showPopup,"onUpdate:show":e=>a.showPopup=e,role:"menu",class:B("content"),overlay:m,overlayProps:{duration:a.transition&&!u.opened.value?g:0},position:"down"===k?"top":"bottom",duration:a.transition?g:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${u.id}-${r.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:y,onOpen:p,onClose:b,onOpened:h,onClosed:f},{default:()=>{var t;return[e.options.map(C),null==(t=o.default)?void 0:t.call(o)]}})]),[[R.aG,a.showWrapper]])};return(0,m.c)({state:a,toggle:k,renderTitle:y}),()=>e.teleport?(0,n.bF)(n.Im,{to:e.teleport},{default:()=>[x()]}):x()}});const M=(0,a.G)(K);o(7708),o(7484),o(887),o(269),o(4371),o(4114);var $=o(8134),D=(o(335),o(4232)),U=o(8172);const G={class:"book-item__content"},Q={class:"book-item__title"},A={class:"book-item__intro"},X={class:"book-item__info"},q={class:"book-item__author"},N={class:"book-item__update-date"};var Y=(0,n.pM)({name:"book-item",__name:"book-item",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(e){const t=(0,U.r)(),o=e=>{t.push({name:"book-detail",query:{id:e.id}})};return(t,l)=>{const a=$._V;return(0,n.uX)(),(0,n.CE)("div",{class:"book-item",onClick:l[0]||(l[0]=t=>o(e.item))},[(0,n.bF)(a,{class:"book-item__img",src:e.item.cover,fit:"cover"},null,8,["src"]),(0,n.Lk)("div",G,[(0,n.Lk)("div",Q,(0,D.v_)(e.item.title),1),(0,n.Lk)("div",A,(0,D.v_)(e.item.intro),1),(0,n.Lk)("div",X,[(0,n.Lk)("div",q,"作者："+(0,D.v_)(e.item.author.name),1),(0,n.Lk)("div",N,"最近更新："+(0,D.v_)(e.item.updateDate),1)])])])}}}),j=o(1241);const J=(0,j.A)(Y,[["__scopeId","data-v-268e1a09"]]);var Z=J,H=o(2376);const ee={class:"book-city"},te={class:"dropdown-menu__item-btn"};var oe=(0,n.pM)({name:"book-city",__name:"book-city",setup(e){const t=(0,i.KR)([]),o=(0,i.Kh)({current:1,size:0,total:0}),a=(0,i.KR)(!1),s=(0,i.Kh)({classifyId:"0",current:1}),u=(0,n.EW)((()=>o.total/o.size)),r=(0,i.KR)(1),d=(0,n.rk)("searchDropdownItemRef"),c=(0,i.KR)([{text:"全部",value:"0"}]),p=async()=>{const e=await(0,H.ob)();c.value=e.map((e=>({text:e.name,value:e.id})))},m=async()=>{try{a.value=!0;const e=await(0,H.kq)({current:o.current,classifyId:s.classifyId});o.current=e.current,o.total=e.total,o.size=e.size,t.value.push(...e.list.map(((e,t)=>({...e,page:o,index:t}))))}finally{a.value=!1}},v=()=>{!a.value&&o.current+1<=u.value&&(o.current++,m())},b=e=>{e&&(r.value=e.page.current)},h=()=>{s.current=r.value},f=()=>{d.value.toggle(),t.value=[],o.current=s.current,m()},g=()=>{t.value=[],o.current=1,m()};return p(),m(),(e,p)=>{const m=M,w=S,R=_.fh,V=y.$n,C=k,x=l.A;return(0,n.uX)(),(0,n.CE)("div",ee,[(0,n.bF)(C,{class:"book-city__dropdown dropdown-menu"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{modelValue:(0,i.R1)(s).classifyId,"onUpdate:modelValue":p[0]||(p[0]=e=>(0,i.R1)(s).classifyId=e),options:(0,i.R1)(c),onChange:g},null,8,["modelValue","options"]),(0,n.bF)(m,{title:`第${(0,i.R1)(r)}页`,ref_key:"searchDropdownItemRef",ref:d,onOpen:h},{default:(0,n.k6)((()=>[(0,n.bF)(R,{center:"",title:"当前页"},{"right-icon":(0,n.k6)((()=>[(0,n.bF)(w,{modelValue:(0,i.R1)(s).current,"onUpdate:modelValue":p[1]||(p[1]=e=>(0,i.R1)(s).current=e),theme:"round",integer:"",min:"1",max:(0,i.R1)(o).total,"button-size":"22"},null,8,["modelValue","max"])])),_:1}),(0,n.bF)(R,{center:"",title:"总页数",value:(0,i.R1)(u)},null,8,["value"]),(0,n.Lk)("div",te,[(0,n.bF)(V,{type:"primary",block:"",round:"",onClick:f},{default:(0,n.k6)((()=>p[2]||(p[2]=[(0,n.eW)("跳转")]))),_:1,__:[2]})])])),_:1},8,["title"])])),_:1}),(0,n.bF)(x,{class:"book-city__list",list:(0,i.R1)(t),"min-item-size":200,loading:(0,i.R1)(a),"key-field":"id",onScrollToBottom:v,onCurrentVisible:b},{default:(0,n.k6)((({item:e,index:t})=>[(0,n.bF)(Z,{item:e,index:t},null,8,["item","index"])])),_:1},8,["list","loading"])])}}});const le=(0,j.A)(oe,[["__scopeId","data-v-7e2ae1e2"]]);var ae=le}}]);
//# sourceMappingURL=465.818c8ceb.js.map